"use strict";function _instanceof(A,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](A):A instanceof e}function _classCallCheck(A,e){if(!_instanceof(A,e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(A,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(A,t.key,t)}}function _createClass(A,e,n){return e&&_defineProperties(A.prototype,e),n&&_defineProperties(A,n),A}var WebP=function(){function A(){_classCallCheck(this,A),this.isSupportWebp=!1}return _createClass(A,[{key:"install",value:async function(A,e){var n=this;this.isSupportWebp=await this.checkWebP("lossy"),A.prototype.$webp=this.isSupportWebp,A.directive("webp",function(A,e,t){if("img"===t.tag&&n.isSupportWebp){try{A.src=e.value.toString().replace(/(\.jpg|\.png)/g,".webp")}catch(A){console.error(A)}document.querySelector("html").classList.add("webp")}})}},{key:"checkWebP",value:function(A){return new Promise(function(e){var n=new Image;n.onload=function(){var A=n.width>0&&n.height>0;e(A)},n.onerror=function(){console.warn("This browser not support Webp!"),e(!1)},n.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[A]})}}]),A}();module.exports=new WebP;
